<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Trip</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        label { display: block; margin: 5px 0; }
        input { margin-left: 10px; }
        button { margin-top: 10px; padding: 8px 14px; cursor: pointer; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 6px; }
    </style>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const tripId = urlParams.get("id");

        async function loadTrip() {
          const resp = await fetch(`/tripplanner/trips/${tripId}`);
          const t = await resp.json();

          document.getElementById("destination").value = t.destination;
          document.getElementById("startDate").value = t.startDate;
          document.getElementById("endDate").value = t.endDate;
          document.getElementById("numPeople").value = t.numPeople;
          document.getElementById("budget").value = t.budget;
        }

        async function updateTrip() {
          const payload = {
            destination: document.getElementById("destination").value,
            startDate: document.getElementById("startDate").value,
            endDate: document.getElementById("endDate").value,
            numPeople: parseInt(document.getElementById("numPeople").value, 10),
            budget: parseFloat(document.getElementById("budget").value)
          };

          const resp = await fetch(`/tripplanner/trips/${tripId}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });

          const data = await resp.json();
          document.getElementById("result").textContent =
            JSON.stringify(data, null, 2);
        }

        window.onload = loadTrip;
    </script>
</head>
<body>
<h1>Edit Trip</h1>
<form onsubmit="event.preventDefault(); updateTrip();">
    <label>Destination: <input id="destination" required></label>
    <label>Start Date: <input id="startDate" type="date" required></label>
    <label>End Date: <input id="endDate" type="date" required></label>
    <label>Number of People: <input id="numPeople" type="number" required></label>
    <label>Budget: <input id="budget" type="number" step="0.01" required></label>
    <button type="submit">Update Trip</button>
</form>

<h2>Response</h2>
<pre id="result"></pre>

<button onclick="window.location.href='trips.html'">‚Üê Back to Trips List</button>
</body>
</html>
